<div class="profile-container">
  <div class="profile-header">
    <h1>Mi Perfil</h1>
    <p class="subtitle">Administra tu informaci√≥n personal</p>
  </div>

  <!-- Mensajes -->
  <div class="alert alert-success" *ngIf="mensaje()">
    ‚úì {{ mensaje() }}
  </div>
  <div class="alert alert-error" *ngIf="error()">
    ‚úó {{ error() }}
  </div>

  <div class="profile-content">
    <!-- Informaci√≥n del perfil -->
    <div class="profile-card">
      <div class="card-header">
        <h2>Informaci√≥n Personal</h2>
        <button 
          *ngIf="!editando()" 
          class="btn btn-primary"
          (click)="activarEdicion()"
        >
          ‚úèÔ∏è Editar Perfil
        </button>
      </div>

      <div class="profile-form">
        <!-- Nombre -->
        <div class="form-group">
          <label for="nombre">Nombre</label>
          <input 
            id="nombre"
            type="text" 
            class="input"
            [(ngModel)]="nombre"
            [disabled]="!editando()"
            placeholder="Tu nombre"
          />
        </div>

        <!-- Apellido -->
        <div class="form-group">
          <label for="apellido">Apellido</label>
          <input 
            id="apellido"
            type="text" 
            class="input"
            [(ngModel)]="apellido"
            [disabled]="!editando()"
            placeholder="Tu apellido"
          />
        </div>

        <!-- Email (no editable) -->
        <div class="form-group">
          <label for="email">Correo Electr√≥nico</label>
          <input 
            id="email"
            type="email" 
            class="input input-disabled"
            [value]="email"
            disabled
          />
         
        </div>

        <!-- Tel√©fono -->
        <div class="form-group">
          <label for="telefono">Tel√©fono</label>
          <input 
            id="telefono"
            type="tel" 
            class="input"
            [(ngModel)]="telefono"
            [disabled]="!editando()"
            placeholder="Ej: 3001234567"
          />
        </div>

        <!-- Edad -->
        <div class="form-group">
          <label for="edad">Edad</label>
          <input 
            id="edad"
            type="number" 
            class="input"
            [(ngModel)]="edad"
            [disabled]="!editando()"
            placeholder="Tu edad"
            min="18"
            max="120"
          />
        </div>

        <!-- Ciudad -->
        <div class="form-group">
          <label for="ciudad">Ciudad</label>
          <select 
            id="ciudad"
            class="input"
            [(ngModel)]="ciudad"
            [disabled]="!editando()"
          >
            <option value="" disabled>Selecciona tu ciudad</option>
            <option *ngFor="let city of ciudadesColombia" [value]="city">
              {{ city }}
            </option>
          </select>
        </div>

        <!-- Direcci√≥n -->
        <div class="form-group">
          <label for="direccion">Direcci√≥n</label>
          <textarea 
            id="direccion"
            class="input"
            [(ngModel)]="direccion"
            [disabled]="!editando()"
            placeholder="Calle, n√∫mero, apartamento..."
            rows="3"
          ></textarea>
        </div>

        <!-- Cambio de contrase√±a (solo en modo edici√≥n) -->
        <div *ngIf="editando()" class="password-section">
          <button 
            type="button"
            class="btn btn-ghost"
            (click)="toggleCambioPassword()"
          >
            {{ mostrarCambioPassword() ? '‚ùå Cancelar cambio de contrase√±a' : 'üîí Cambiar contrase√±a' }}
          </button>

          <div *ngIf="mostrarCambioPassword()" class="password-fields">
            <div class="form-group">
              <label for="passwordActual">Contrase√±a Actual</label>
              <input 
                id="passwordActual"
                type="password" 
                class="input"
                [(ngModel)]="passwordActual"
                placeholder="Tu contrase√±a actual"
              />
            </div>

            <div class="form-group">
              <label for="passwordNueva">Nueva Contrase√±a</label>
              <input 
                id="passwordNueva"
                type="password" 
                class="input"
                [(ngModel)]="passwordNueva"
                placeholder="M√≠nimo 6 caracteres"
              />
            </div>

            <div class="form-group">
              <label for="passwordConfirmar">Confirmar Nueva Contrase√±a</label>
              <input 
                id="passwordConfirmar"
                type="password" 
                class="input"
                [(ngModel)]="passwordConfirmar"
                placeholder="Repite la nueva contrase√±a"
              />
            </div>
          </div>
        </div>

        <!-- Botones de acci√≥n -->
        <div class="form-actions" *ngIf="editando()">
          <button 
            class="btn btn-primary btn-large"
            (click)="guardarCambios()"
            [disabled]="cargando()"
          >
            {{ cargando() ? 'Guardando...' : 'üíæ Guardar Cambios' }}
          </button>
          <button 
            class="btn btn-ghost btn-large"
            (click)="cancelarEdicion()"
            [disabled]="cargando()"
          >
            Cancelar
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
