<div class="my-orders-container">
  <div class="orders-header">
    <button class="back-btn" (click)="volverATienda()">
      ‚Üê Volver a la Tienda
    </button>
    <h1>Mis Pedidos</h1>
    <p class="subtitle">Aqu√≠ puedes ver el estado de todos tus pedidos</p>
  </div>

  <!-- Estado de carga -->
  <div class="loading-state" *ngIf="cargando()">
    <div class="spinner"></div>
    <p>Cargando tus pedidos...</p>
  </div>

  <!-- Error -->
  <div class="error-state" *ngIf="error() && !cargando()">
    <span class="error-icon">‚ö†Ô∏è</span>
    <p>{{ error() }}</p>
    <button class="retry-btn" (click)="cargarPedidos()">Reintentar</button>
  </div>

  <!-- Sin pedidos -->
  <div class="empty-state" *ngIf="!cargando() && !error() && pedidos().length === 0">
    <span class="empty-icon">üì¶</span>
    <h2>No tienes pedidos a√∫n</h2>
    <p>Cuando realices un pedido, aparecer√° aqu√≠</p>
    <button class="shop-btn" (click)="volverATienda()">Ir a la Tienda</button>
  </div>

  <!-- Lista de pedidos -->
  <div class="orders-list" *ngIf="!cargando() && !error() && pedidos().length > 0">
    <div class="order-card" *ngFor="let pedido of pedidos()">
      <!-- Encabezado del pedido -->
      <div class="order-header">
        <div class="order-info">
          <h3>Pedido #{{ pedido.Id_Factura }}</h3>
          <p class="order-date">{{ formatearFecha(pedido.Fecha_Compra) }}</p>
        </div>
        <div class="order-status" [ngClass]="getEstadoClase(pedido.Estado)">
          <span class="status-icon">{{ getEstadoIcono(pedido.Estado) }}</span>
          <span class="status-text">{{ pedido.Estado }}</span>
        </div>
      </div>

      <!-- Productos del pedido -->
      <div class="order-products">
        <div class="product-item" *ngFor="let producto of pedido.productos">
          <img 
            [src]="getImagenUrl(producto.Imagen)" 
            [alt]="producto.Titulo"
            class="product-img"
          />
          <div class="product-details">
            <h4>{{ producto.Titulo }}</h4>
            <p class="product-quantity">Cantidad: {{ producto.Cantidad }}</p>
            <p class="product-price">
              COP {{ producto.Precio_Unitario | number:'1.0-0' }} c/u
            </p>
          </div>
          <div class="product-subtotal">
            COP {{ (producto.Precio_Unitario * producto.Cantidad) | number:'1.0-0' }}
          </div>
        </div>
      </div>

      <!-- Informaci√≥n de env√≠o -->
      <div class="order-shipping">
        <div class="shipping-item">
          <span class="shipping-label">üìç Direcci√≥n:</span>
          <span class="shipping-value">{{ pedido.Direccion_Envio }}</span>
        </div>
        <div class="shipping-item">
          <span class="shipping-label">üìû Tel√©fono:</span>
          <span class="shipping-value">{{ pedido.Telefono_Envio }}</span>
        </div>
      </div>

      <!-- Total del pedido -->
      <div class="order-footer">
        <div class="order-total">
          <span class="total-label">Total:</span>
          <span class="total-amount">COP {{ pedido.Total | number:'1.0-0' }}</span>
        </div>
      </div>
    </div>
  </div>
</div>
